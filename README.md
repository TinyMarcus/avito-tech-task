# üßë‚Äçüî¨ –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ Avito

–°–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ –∏ –∏—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Avito.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è](#–æ–ø–∏—Å–∞–Ω–∏–µ-–∑–∞–¥–∞–Ω–∏—è)
2. [–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞](#–∑–∞–ø—É—Å–∫-—Å–µ—Ä–≤–∏—Å–∞)
3. [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API](#—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è-api)
4. [–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–¥–µ—Ç–∞–ª–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
5. [–í–æ–ø—Ä–æ—Å—ã, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è](#–≤–æ–ø—Ä–æ—Å—ã-–≤–æ–∑–Ω–∏–∫—à–∏–µ-–≤-—Ö–æ–¥–µ-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–∑–∞–¥–∞–Ω–∏—è)
6. [–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á](#–ø—Ä–æ–≥—Ä–µ—Å—Å-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö-–∑–∞–¥–∞—á)

## –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞:

–í –ê–≤–∏—Ç–æ —á–∞—Å—Ç–æ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã ‚Äî —Ç–µ—Å—Ç—ã –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Å–∫–∏–¥–æ—á–Ω—ã–µ –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ. –ù–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º –∫–æ–º–∏—Ç–µ—Ç–µ –ø—Ä–∏–Ω—è–ª–∏ —Ä–µ—à–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –ø—Ä–æ–≤–æ–¥–∏–º—ã–º–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏ –∏ –≤—ã–Ω–µ—Å—Ç–∏ —ç—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å.

### –ó–∞–¥–∞—á–∞:

–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å, —Ö—Ä–∞–Ω—è—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–µ–≥–º–µ–Ω—Ç—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–µ–≥–º–µ–Ω—Ç).

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```
git clone https://github.com/TinyMarcus/avito-tech-task.git
```

–î–∞–ª–µ–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```
cd avito-tech-task
```

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—Ç–∏–ª–∏—Ç–æ–π make, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ—Ç —Å–±–æ—Ä–∫—É –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 8080:

```
make build
make run
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –≤ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `docker-compose`. –í–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ —Ç–∞–∫–∂–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `PostgreSQL` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `dynamic-user-segmentation` —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `segments`, `users`, `history`, `users_segments`. 

–ú–µ—Ö–∞–Ω–∏–∑–º –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø—É—Å–∫–æ–º SQL-—Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API
1. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –¥–∏–∑–∞–π–Ω–æ–º RESTful API.
2. –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
3. –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã HTTP-—Å—Ç–∞—Ç—É—Å –∫–æ–¥ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –≤ —Ç–µ–ª–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{"error": "message}`.
4. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Swagger –∏ Swagger UI –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å API –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Äî –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ URL: `http://localhost:8080/swagger/index.html`.

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ API —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

## –†–∞–±–æ—Ç–∞ —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏
### POST /api/v1/segments

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ –≤ –ë–î.

* –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
    * `slug` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞;
    * `description` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞.
* –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–¥ 201):
    * `slug` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X POST localhost:8080/api/v1/segments \
-H "Content-Type: application/json" \
-d '{
	"slug": "AVITO_VOICE_MESSAGES",
	"description": "–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö"
}'
```

–û—Ç–≤–µ—Ç:

```
{
    "slug": "AVITO_VOICE_MESSAGES"
}
```

### GET /api/v1/segments/{slug}

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é.

* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:
    * `slug` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞.
* –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–¥ 200):
    * –∏—Å–∫–æ–º—ã–π —Å–µ–≥–º–µ–Ω—Ç.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X GET localhost:8080/api/v1/segments/AVITO_VOICE_MESSAGES
```

–û—Ç–≤–µ—Ç:

```
{
    "id": 1,
    "slug": "AVITO_VOICE_MESSAGES",
    "description": "–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö"
}
```

### GET /api/v1/segments

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤.

* –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–¥ 200):
    * —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X GET localhost:8080/api/v1/segments
```

–û—Ç–≤–µ—Ç:

```
[
    {
        "id": 1,
        "slug": "AVITO_VOICE_MESSAGES",
        "description": "–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö"
    },
    {
        "id": 2,
        "slug": "AVITO_PERFORMANCE_VAS",
        "description": "–ù–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è"
    },
    {
        "id": 3,
        "slug": "AVITO_DISCOUNT_30",
        "description": "–°–∫–∏–¥–∫–∞ 30% –Ω–∞ —É—Å–ª—É–≥–∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è"
    },
    {
        "id": 4,
        "slug": "AVITO_DISCOUNT_50",
        "description": "–°–∫–∏–¥–∫–∞ 50% –Ω–∞ —É—Å–ª—É–≥–∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è"
    },
]
```

### PUT /api/v1/segments/{slug}

–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ –≤ –ë–î.

* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:
    * `slug` ‚Äî –∏—Å—Ö–æ–¥–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞.
* –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
    * `slug` ‚Äî –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞;
    * `description` ‚Äî –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞.
* –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–¥ 200):
    * `id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–≥–º–µ–Ω—Ç–∞;
    * `slug` ‚Äî –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞;
    * `description` ‚Äî –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X PUT localhost:8080/api/v1/segments/AVITO_VOICE_MESSAGES \
-H "Content-Type: application/json" \
-d '{
	"slug": "AVITO_VOICE_MESSAGES",
	"description": "–ù–æ–≤–æ–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
}'
```

–û—Ç–≤–µ—Ç:

```
{
    "id": 1,
    "slug": "AVITO_VOICE_MESSAGES",
    "description": "–ù–æ–≤–æ–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
}
```

### DELETE /api/v1/segments/{slug}

–£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ –∏–∑ –ë–î.

* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:
    * `slug` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞.
* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–≤–µ—Ç–∞:
    * HTTP-—Å—Ç–∞—Ç—É—Å –∫–æ–¥ 204.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X DELETE localhost:8080/api/v1/segments/AVITO_VOICE_MESSAGES
```


## –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
### POST /api/v1/users

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î.

* –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
    * `name` ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–¥ 201):
    * `id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X POST localhost:8080/api/v1/users \
-H "Content-Type: application/json" \
-d '{
	"name": "Ivan Ivanov"
}'
```

–û—Ç–≤–µ—Ç:

```
{
    "id": 1
}
```

### GET /api/v1/users/{userId}

–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É.

* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:
    * `userId` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–¥ 200):
    * –∏—Å–∫–æ–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X GET localhost:8080/api/v1/users/1
```

–û—Ç–≤–µ—Ç:

```
{
    "id": 1,
    "name": "Ivan Ivanov"
}
```

### GET /api/v1/users

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

* –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–¥ 200):
    * —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X GET localhost:8080/api/v1/users
```

–û—Ç–≤–µ—Ç:

```
[
    {
        "id": 1,
        "name": "Ivan Ivanov"
    },
    {
        "id": 2,
        "name": "Petr Petrov"
    }
]
```

### POST /api/v1/users/{userId}/changeSegmentsOfUser

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–µ–≥–º–µ–Ω—Ç –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –Ω–∏—Ö.

* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:
    * `userId` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
    * `add_to_user` ‚Äî —Å–µ–≥–º–µ–Ω—Ç—ã, –≤ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å;
    * `take_from_user` ‚Äî —Å–µ–≥–º–µ–Ω—Ç—ã, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —É–±–∏—Ä–∞—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–≤–µ—Ç–∞:
    * HTTP-—Å—Ç–∞—Ç—É—Å –∫–æ–¥ 200.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X POST localhost:8080/api/v1/users/1/changeSegmentsOfUser \
-H "Content-Type: application/json" \
-d '{
	"add_to_user": [
        {
            "slug": "AVITO_VOICE_MESSAGES",
            "deadline_date": "2023-09-30 12:00:00+03"
        },
        {
            "slug": "AVITO_DISCOUNT_50"
        }
    ],
    "take_from_user": [
        "AVITO_DISCOUNT_30"
    ]
}'
```


### GET /api/v1/users/{userId}/active

–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:
    * `userId` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–≤–µ—Ç–∞:
    * HTTP-—Å—Ç–∞—Ç—É—Å –∫–æ–¥ 200.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**:

–ó–∞–ø—Ä–æ—Å:

```
curl -X GET localhost:8080/api/v1/users/1/active
```

–û—Ç–≤–µ—Ç:

```
{
    "userId": 1,
    "segments": [
        {
            "slug": "AVITO_VOICE_MESSAGES",
            "deadline_date": "2023-09-31 12:00:00+03"
        },
        {
            "slug": "AVITO_DISCOUNT_50"
        }
    ]
}
```

–¢–∞–∫–∂–µ –≤–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤—Å–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–µ –≤—ã—à–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Swagger UI:

![Swagger UI](./images/swagger.jpg)

## –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:

```
.
‚îú‚îÄ‚îÄ internal
‚îÇ   ‚îú‚îÄ‚îÄ config                              // –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db                                  // –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ handlers                            // –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dtos                            // DTO-–º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ middlewares                     // –º–∏–¥–¥–ª–≤–µ–π—Ä—ã (–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤) 
‚îÇ   ‚îú‚îÄ‚îÄ logger                              // –ª–æ–≥–≥–µ—Ä –∏ –µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models                              // –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ repositories                        // —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î
‚îú‚îÄ‚îÄ cmd/dynamic-user-segmentation-service   // —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ api                                     // –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger
```

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ—Ä –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–ª—Å—è:
* —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ GitFlow (–±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤–µ—Ç–∫–∞ `develop`, –æ—Ç –∫–æ—Ç–æ—Ä–æ–π —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏ –ø–æ –º–µ—Ä–µ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞);
* —Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –¥–∏–∑–∞–π–Ω—É RESTful API;
* –ø–æ–¥—Ö–æ–¥–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–µ–≤—Ä–∏—Å–∞ –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å–ª–æ–∏ (—á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞), –∞ —Ç–∞–∫–∂–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π;
* —Ä–∞–±–æ—Ç—ã —Å –°–£–ë–î PostgreSQL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `sqlx` –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º —Å—ã—Ä—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤;
* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ docker –∏ docker-compose –¥–ª—è –ø–æ–¥–Ω—è—Ç–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è dev-—Å—Ä–µ–¥—ã (—Å –Ω–∞–∫–∞—Ç—ã–≤–∞–Ω–∏–µ–º —Å—Ö–µ–º—ã –ë–î –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ).

–¢–∞–∫–∂–µ –±—ã–ª–æ –Ω–∞—á–∞—Ç–æ, –Ω–æ –Ω–µ–¥–æ–¥–µ–ª–∞–Ω–æ:
* —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –º–æ–∫–æ–≤ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `testify` –∏ `gomock`) ‚Äî –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –º–æ–∫ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –Ω–æ –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —Ç–µ—Å—Ç—ã –Ω–µ –±—ã–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã;
* –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∏—Å—Ç–æ—Ä–∏–∏ ‚Äî –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –º–µ—Ç–æ–¥–∞–º–∏ –∑–∞–ø–∏—Å–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–æ–≤, –Ω–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω –º–µ—Ç–æ–¥ –∏ "—Ä—É—á–∫–∞" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏. 

### –°—Ö–µ–º–∞ –ë–î

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞.

![–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](./images/db.jpg)

–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ–≥–æ **4 —Ç–∞–±–ª–∏—Ü—ã**: —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ç–∞–±–ª–∏—Ü–∞ —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏, —Ç–∞–±–ª–∏—Ü–∞, —Å–≤—è–∑—ã–≤–∞—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (—Å–≤—è–∑—å –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º), –∞ —Ç–∞–∫–∂–µ —Ç–∞–±–ª–∏—Ü–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–≤—è–∑—å –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º).

–¢–∞–±–ª–∏—Ü–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è ‚Ññ1 —Å –∑–∞–ø—Ä–æ—Å–æ–º –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–æ –∑–∞–¥–∞–Ω–∏–µ –Ω–µ –±—ã–ª–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ ‚Äî –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞–ø–∏—Å—å –∏—Å—Ç–æ—Ä–∏–∏, –Ω–æ –Ω–µ –µ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞

–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –≤ –±—É–¥—É—â–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞ –±—ã–ª–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–µ–≤ ‚Äî –Ω–∞ —Å–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î –∏ –Ω–∞ —Å–ª–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

–î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞—Ç—Ç–µ—Ä–Ω "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π" –∏ –Ω–∞–ø–∏—Å–∞–Ω—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏ (`userRepository`, `segmentRepository` –∏ `historyRepository` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ). –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –±—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–ª—è –°–£–ë–î PostgreSQL ‚Äî –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –¥—Ä—É–≥–∏–º–∏ –°–£–ë–î –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å –ª–µ–≥–∫–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–∞ –Ω–æ–≤—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é.

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ö–µ–Ω–¥–ª–µ—Ä—ã (–∏–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã), –∫–æ—Ç–æ—Ä—ã–µ, –ø—Ä–∏–Ω–∏–º–∞—è –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤—ã–∑—ã–≤–∞–ª–∏ –≤ —Å–≤–æ–∏—Ö –º–µ—Ç–æ–¥–∞—Ö –º–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Ç—É–¥–∞ –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –ë–î.

## –í–æ–ø—Ä–æ—Å—ã, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è

1. –í–æ–∑–Ω–∏–∫ –≤–æ–ø—Ä–æ—Å —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î –¥–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ ‚Äî –ø—Ä–∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å—É –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –æ—Ç–¥–µ–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —Å–µ–≥–º–µ–Ω—Ç–∞–º. –ù–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è "–ø–∞–π–ø–ª–∞–π–Ω–∞" –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è (–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É –º–µ–Ω—è –Ω–µ –±—ã–ª–æ, —Ç–∞–∫ –∫–∞–∫ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ª–∏–±–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –ª–∏–±–æ –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ (–Ω–æ —Ç–æ–≥–¥–∞ –Ω–µ –±—ã–ª–æ –±—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–µ–ª–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–µ–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å)) —è –ø—Ä–∏–Ω—è–ª —Ä–µ—à–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –æ—Ç–¥–µ–ª—å–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `Users`. –ò–º–µ–Ω–Ω–æ –ø–æ —ç—Ç–æ–π –ª–æ–≥–∏–∫–µ –µ—Å—Ç—å "—Ä—É—á–∫–∞" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ –Ω–µ –µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
2. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–ª–æ –∂–µ–ª–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–µ–≥–º–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö `uuid` –≤–º–µ—Å—Ç–æ `int`, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ –±–æ–ª—å—à–æ–º –ø—Ä–æ–¥–µ –∏–∑-–∑–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ç–æ—Ç —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –≤ —É—Å–ª–æ–≤–∏–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—ã–ª–∏ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ, —è —Ä–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –∂–µ –µ–≥–æ :)
3. –£ –º–µ–Ω—è –±—ã–ª–æ –∂–µ–ª–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–∏–≥—Ä–∞—Ü–∏–π, –Ω–æ —è –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ SQL-—Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç–∞–±–ª–∏—Ü. –ù–æ –ø—Ä–∏ —ç—Ç–æ–º, –∫–∞–∫ —è –ø–∏—Å–∞–ª –≤—ã—à–µ, —Å—Ö–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ docker (–≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).
4. –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è ‚Ññ2 –≤–æ–∑–Ω–∏–∫ –≤–æ–ø—Ä–æ—Å, –∫–∞–∫–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ —Å–µ–≥–º–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å—á–∏—Ç–∞—Ç—å "–∞–∫—Ç–∏–≤–Ω—ã–º–∏". –ê–∫—Ç–∏–≤–Ω—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–≤—è–∑–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ª–∏–±–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞—Ç—É "–ø—Ä–æ—Ç—É—Ö–∞–Ω–∏—è", —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∞–∫—Ç–∏–≤–Ω—ã –≤—Å–µ–≥–¥–∞, –ø–æ–∫–∞ –∏—Ö –Ω–µ —É–¥–∞–ª—è—Ç (`deadline_date = null`), –ª–∏–±–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞—Ç—É, –∫–æ—Ç–æ—Ä–∞—è –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª–∞. –ü—Ä–∏ —ç—Ç–æ–º –æ—Ç–º–µ—á—É, —á—Ç–æ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –¥–∞—Ç—ã "–ø—Ä–æ—Ç—É—Ö–∞–Ω–∏—è" –∑–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `UsersSegments` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è ‚Äî –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –ø–æ–ª—É—á–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–≤—è–∑–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ —Å–µ–≥–º–µ–Ω—Ç–∞–º. –ó–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ POST-–∑–∞–ø—Ä–æ—Å–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–µ–≥–º–µ–Ω—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —É—á–∞—Å—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

## –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

| –ó–∞–¥–∞—á–∞  | –ü—Ä–æ–≥—Ä–µ—Å—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|:----------:|-------------|
| **–ú–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞** | ‚úÖ | |
| **–ú–µ—Ç–æ–¥ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞** | ‚úÖ | |
| **–ú–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–µ–≥–º–µ–Ω—Ç** | ‚úÖ | –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å—Å—è |
| **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** | ‚úÖ | –¢–∞–∫ –∫–∞–∫ **–±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ññ2**, –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ —Å—Ç–æ–∏—Ç `deadline_date` –∏–ª–∏ `deadline_date` –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª |
| **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏** | üôà | –ë—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –º–æ–∫–∏, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î –¥–ª—è —Ç–µ—Å—Ç–æ–≤, –Ω–æ –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –Ω–µ –±—ã–ª–∞ –¥–æ–¥–µ–ª–∞–Ω–∞ |
| **Swagger** | ‚úÖ | |
| **–î–æ–ø. –∑–∞–¥–∞–Ω–∏–µ ‚Ññ1 (*–∏—Å—Ç–æ—Ä–∏—è*)** | üôà | –ë—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ –ë–î, –Ω–æ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –æ—Ç—á–µ—Ç–∞ |
| **–î–æ–ø. –∑–∞–¥–∞–Ω–∏–µ ‚Ññ2 (*–¥–µ–¥–ª–∞–π–Ω*)** | ‚úÖ | –ë—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–µ–¥–ª–∞–π–Ω–∞ ‚Äî –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ–≥–º–µ–Ω—Ç —Å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–º –¥–µ–¥–ª–∞–π–Ω–æ–º –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç (–Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ –æ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–µ–≥–º–µ–Ω—Ç–∞: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º POST-–∑–∞–ø—Ä–æ—Å–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) |
| **–î–æ–ø. –∑–∞–¥–∞–Ω–∏–µ ‚Ññ3 (*seed*)** | ‚ùå | |
| **–ó–∞–ø—É—Å–∫ –≤ docker** | ‚úÖ | |
| **CI/CD** | üôà | –î–æ–±–∞–≤–ª–µ–Ω—ã —ç—Ç–∞–ø Build –∏ Test –≤ GitHub Actions |
